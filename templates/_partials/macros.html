{# macro to create activies select element #}
{% macro activity_choice (activity_input=False, hidden_input_for_icon=False) -%}
    {% if activity_input and hidden_input_for_icon %}
        <div class="section cards iconpicker">
            <div class="container">
                <div class="field {% if activity_input.errors %}has-error{% endif %}">
                    {{ activity_input.label(class_="label") }}
                    <div class="control has-icons-left has-icons-right">
                        {{ activity_input(class_="input", placeholder="Activity Type") }}
                        <span class="icon is-small is-left has-text-primary">
                            <i class="fas fa-cogs"></i>
                        </span>
                        <span class="error-msg icon is-small is-right">
                          <i class="fas fa-exclamation-triangle"></i>
                        </span>
                    </div>
                    <p class="error-msg help is-danger">
                        {% if activity_input.errors|length > 0 %}
                            {{ activity_input.errors[0] }}
                        {% endif %}
                    </p>
                </div>
                <div class="field {% if hidden_input_for_icon.errors %}has-error{% endif %}">
                    <div class="label">
                        Pick an Activity Icon
                    </div>

                    <p class="error-msg help is-danger">
                        {% if hidden_input_for_icon.errors|length > 0 %}
                            {{ hidden_input_for_icon.errors[0] }}
                        {% endif %}
                    </p>
                </div>
                <div class="columns is-multiline embedded limited-exposure">
                    {# hidden field to hold picked icon #}
                    {{ hidden_input_for_icon }}
                    {% for item in icons %}
                        <div class="column">
                            <a class="card button is-primary iconpicker {{ hidden_input_for_icon.id }}"
                               title="icon for {{ item|icon_alt }}"
                               data-value="{{ item }}" data-input="{{ hidden_input_for_icon.id }}">
                                <div class="card-content">
                                    <div class="media-con">
                                        <img src="/static/assets/images/icons/{{ item }}"
                                             alt="image for {{ item|icon_alt }} icon" height="60"
                                             width="60">
                                    </div>
                                    <div class="content">{{ item|icon_alt }}</div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}
{%- endmacro %}

{# macro to create disable/enable (don't share/share) switch element #}
{% macro enable_switch (id='', form=false) -%}
    {{ form.label(class_="label") }}
    <div class="control">
        <label class="switch">
            <input id="{{ id }}" name="{{ id }}" type="checkbox"
                   {% if form.data %}checked value="on"{% else %}value="off"{% endif %}>
            <span class="slider"></span>
        </label>
    </div>
    <span class="switch-value">No&nbsp;&nbsp;&nbsp;Yes</span>
{%- endmacro %}

{# macro to create disable/enable (don't share/share) switch element #}
{% macro star_form (id='', label="Rating", form=false) -%}
    {% if form %}
        <label for="{{ id }}" class="label">{{ label }}</label>
        {% if form.choices|length > 0 %}
            <div class="stars" id="{{ id }}">
                {% for subfield in form.choices|reverse %}
                    <input class="star star-{{ subfield[0] }}" id="{{ id }}-{{ subfield[0]|int - 1 }}" type="radio"
                           name="{{ id }}" value="{{ subfield[0] }}" {% if form.data == subfield[0] %}
                           checked{% endif %}/>
                    <label class="star star-{{ subfield[0] }}" for="{{ id }}-{{ subfield[0]|int - 1 }}"
                           title="{{ subfield[1] }}"></label>
                {% endfor %}
            </div>
        {% endif %}
    {% endif %}
{%- endmacro %}

{% macro address_collection (form=False, label="Has Physical Address") -%}
    <div class="field">
        <label class="label">Address</label>
        <div class="control">
            {{ form.has_address(class_="is-checkradio is-medium") }}
            {{ form.has_address.label }}
        </div>
    </div>

    {# address block hide/shows based on has_address  #}
    <div id="{{ form.id }}_address_block"
         class="has-background-white-bis embedded">
        <div class="field {% if form.address_line_1.errors %}has-error{% endif %}">
            {{ form.address_line_1.label(class_="label") }}
            <div class="control">
                {{ form.address_line_1(class_="input", placeholder="Street Address, P.O. Box") }}
            </div>
            <p class="error-msg help is-danger">
                {% if form.address_line_1.errors|length > 0 %}
                    {{ form.address_line_1.errors[0] }}
                {% endif %}
            </p>
        </div>

        <div class="field {% if form.address_line_2.errors %}has-error{% endif %}">
            {{ form.address_line_2.label(class_="label") }}
            <div class="control">
                {{ form.address_line_2(class_="input", placeholder="Apartment, Suite, Unit, Building, Floor, etc.") }}
            </div>
            <p class="error-msg help is-danger">
                {% if form.address_line_2.errors|length > 0 %}
                    {{ form.address_line_2.errors[0] }}
                {% endif %}
            </p>
        </div>
        <div class="columns">
            <div class="field column {% if form.city.errors %}has-error{% endif %}">
                {{ form.city.label(class_="label") }}
                <div class="control">
                    {{ form.city(class_="input", placeholder="City") }}
                </div>
                <p class="error-msg help is-danger">
                    {% if form.city.errors|length > 0 %}
                        {{ form.city.errors[0] }}
                    {% endif %}
                </p>
            </div>
            <div class="field column {% if form.state.errors %}has-error{% endif %}">
                {{ form.state.label(class_="label") }}
                <div class="control">
                    {{ form.state(class_="input", placeholder="State") }}
                </div>
                <p class="error-msg help is-danger">
                    {% if form.state.errors|length > 0 %}
                        {{ form.state.errors[0] }}
                    {% endif %}
                </p>
            </div>
        </div>
        <div class="columns">
            <div class="field column {% if form.postal_code.errors %}has-error{% endif %}">
                {{ form.postal_code.label(class_="label") }}
                <div class="control">
                    {{ form.postal_code(class_="input", placeholder="Postal Code") }}
                </div>
                <p class="error-msg help is-danger">
                    {% if form.postal_code.errors|length > 0 %}
                        {{ form.postal_code.errors[0] }}
                    {% endif %}
                </p>
            </div>
            <div class="field column {% if form.country.errors %}has-error{% endif %}">
                {{ form.country.label(class_='label') }}
                <div class="control has-icons-left">
                    <div class="select">
                        {{ form.country }}
                    </div>
                    <div class="icon is-small is-left has-text-primary">
                        <i class="fas fa-globe"></i>
                    </div>
                </div>
                <p class="error-msg help is-danger">
                    {% if form.country.errors|length > 0 %}
                        {{ form.country.errors[0] }}
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
{%- endmacro %}

{% macro event_layer(form_data) -%}

    <div class="media-content">
        <p class="title is-4">
            <span id="event-icon" class="is-48x48">
                <img src="/static/assets/images/icons/{{ form_data['activity_icon'] }}"
                     alt="image for {{ form_data['activity_icon']|icon_alt }} icon" height="36"
                     width="36">
            </span>
            <span id="event-modal-title" class="is-capitalized">{{ form_data['event_name']|title }}</span>
        </p>
        <div class="media">
            <div class="media-left is-half">
                <div class="columns">
                    <div class="is-bold column">When:</div>
                    <div class="column" id="event-date-time-range">{{ form_data['date_time_range'] }}</div>
                </div>
                <div class="columns" id="event-address">
                    <div class="is-bold column">Where:</div>
                    <div class="column" id="event-address-parts">
                         {{ display_address(add=form_data['address']) }}
                    </div>
                </div>
                <div class="columns">
                    <div class="is-bold column">Ages:</div>
                    <div class="column" id="event-ages">
                        {% if form_data['age_limit'] %}
                            {% for age in form_data['age_limit'] %}
                                {{ age }}{% if loop.index != loop.length %}, {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <div class="columns">
                    <div class="is-bold column">Details:</div>
                    <div class="column" id="event-details">
                        {{ form_data['details'] }}
                    </div>
                </div>
                <div class="columns">
                    <div class="is-bold column">Cost:</div>
                    <div class="column" id="event-cost">
                        {% if form_data['price_for_non_members'] %}
                            {{ form_data['price_for_non_members'] }}
                        {% else %}
                            Free
                        {% endif %}
                    </div>
                </div>
                <div class="columns">
                    <div class="column is-bold"><i class="fas fa-users" aria-hidden="true"></i></div>
                    <div class="column" id="event-attendance">
                        <p>
                            {{ form_data['attendees'] }}
                            {% if form_data['attendees'] > 1 %}
                                people plan
                            {% else %}
                                person plans
                            {% endif %}
                            on going
                        </p>
                    </div>
                </div>
            </div>
            <div id="event-modal-right" class="media-content is-half">
                this is the map stuff and see details lik
            </div>


        </div>
    </div>

{%- endmacro %}

{% macro display_address(add) -%}
    {{ add['address_line_1'] }}
    {% if add['address_line_2']|length > 0 %}
        <br>{{ add['address_line_2'] }}
    {% endif %}
    <br>{{ add['city'] }}, {{ add['state'] }}
    {% if add['postal_code']|length > 0 %}
        <br>{{ add['postal_code'] }} {{ add['country'] }}
    {% else %}
        <br>{{ add['country'] }}
    {% endif %}
{%- endmacro %}