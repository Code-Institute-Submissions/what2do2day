{#
    This template expects a list of activies for the drop down and when updating, an event object
     to prepopulate values with. When updating, we'll display the switch element to share the event with
     the community.
#}

<div class="field">
    <label class="label">Events</label>
    <div class="control">
        {{ form.event.has_event(class_="is-checkradio is-medium") }}
        {{ form.event.has_event.label }}
    </div>
</div>

{# event block hide/shows based on has_eveent  #}
<div id="event_block"
     class="has-background-white-bis embedded">
    <div class="columns">
        <div class="field column {% if form.event.event_name.errors %}has-error{% endif %}">
            {{ form.event.event_name.label(class_="label") }}
            <div class="control has-icons-left has-icons-right">
                {{ form.event.event_name(class_="input", placeholder="Event Name") }}
                <span class="icon is-small is-left has-text-primary">
                            <i class="fas fa-landmark"></i>
                        </span>
                <span class="error-msg icon is-small is-right">
                          <i class="fas fa-exclamation-triangle"></i>
                        </span>
            </div>
            <p class="error-msg help is-danger">
                {% if form.event.event_name.errors|length > 0 %}
                    {{ form.event.event_name.errors[0] }}
                {% endif %}
            </p>
        </div>
        <div class="field column {% if form.event.event_start_datetime.errors %}has-error{% endif %}">
            {{ form.event.event_start_datetime.label(class_="label") }}
            <div class="control">
                {{ form.event.event_start_datetime(class_="input", type="datetime") }}
            </div>
            <p class="error-msg help is-danger">
                {% if form.event.event_start_datetime.errors|length > 0 %}
                    {{ form.event.event_start_datetime.errors[0] }}
                {% endif %}
            </p>
        </div>
    </div>

    <div class="columns">
        <div class="column">
            <div class="field {% if form.event.price_for_non_members.errors %}has-errors{% endif %}">
                {{ form.event.price_for_non_members.label(class_="label") }}
                <div class="control has-icons-left has-icons-right">
                    {{ form.event.price_for_non_members(class_="input", placeholder="Free") }}
                    <span class="icon is-small is-left has-text-primary">
                            <i class="fas fa-comments-dollar"></i>
                        </span>
                    <span class="error-msg icon is-small is-right">
                          <i class="fas fa-exclamation-triangle"></i>
                        </span>
                </div>
                <p class="error-msg help is-danger">
                    {% if form.event.price_for_non_members.errors|length > 0 %}
                        {{ form.event.price_for_non_members.errors[0] }}
                    {% endif %}
                </p>
            </div>
            <div class="field {% if form.event.activity.errors %}has-error{% endif %}">
                {{ form.event.activity.label(class_='label') }}
                <div class="control has-icons-left">
                    <div class="select">
                        {{ form.event.activity }}
                    </div>
                    <div class="icon is-small is-left has-text-primary">
                        <i class="fas fa-cogs" aria-hidden="true"></i>
                    </div>
                </div>
                <p class="error-msg help is-danger">
                    {% if form.event.activity.errors|length > 0 %}
                        {{ form.event.activity.errors[0] }}
                    {% endif %}
                </p>
            </div>
        </div>
        <div class="column">
            <div class="field {% if form.event.details.errors %}has-error{% endif %}">
                {{ form.event.details.label(class_="label") }}
                <div class="control has-icons-right">
                    {{ form.event.details(class_="textarea", placeholder="Provide details about what to bring and where to meet.") }}
                    <span class="error-msg icon is-small is-right">
                          <i class="fas fa-exclamation-triangle"></i>
                        </span>
                </div>
                <p class="error-msg help is-danger">
                    {% if form.event.details.errors|length > 0 %}
                        {{ form.event.details.errors[0] }}
                    {% endif %}
                </p>
            </div>
        </div>
    </div>

    {#  do a macro so this can be displayed as cards #}
    <div class="field {% if form.event.age_limit.errors %}has-error{% endif %}">
        {{ form.event.age_limit.label(class_='label') }}
        <div class="control">
            <div class="select is-multiple ages">
                {{ form.event.age_limit(class_="card age-card", size="8") }}
            </div>
        </div>
        <p class="error-msg help is-danger">
            {% if form.event.age_limit.errors|length > 0 %}
                {{ form.event.age_limit.errors[0] }}
            {% endif %}
        </p>
    </div>
    <section>
        <div class="container">
            {{ form.event.age_limit.label(class_='label') }}
        </div>
        <div class="container ages select is-multiple">
            {% for item in form.event.age_limit.choices %}
                <div class="card">
                    <div class="card-content">
                        <div class="media-con">
                            <img src="/static/assets/images/ages/{{ item[0] }}.png"
                                 alt="image for {{ item[1] }} age group">
                        </div>
                        <div class="media-content">
                            <p class="title is-4">{{ item[1] }}</p>
                            <p class="subtitle is-6">Ages: {{ item[0] }}</p>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>

    {# show_enable determines if the user sees a event specific enablment or not #}
    {% if event %}
        <div class="field">
            {{ enable_switch('place', event.enabled) }}
        </div>
    {% endif %}
</div>