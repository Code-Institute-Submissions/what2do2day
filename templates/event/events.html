{% extends 'base.html' %}
{% block content %}
    {# CSRF protection #}
    <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    </form>
    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    Events
                </h1>
                {% if events | length < 1 %}
                    <div class="level-left">
                        <div class="level-item">
                            <p class="subtitle">
                                Sorry, there are no events at this time.
                            </p>
                        </div>
                        <div class="level-item">
                            <p class="control">
                                <a class="button is-white" href="{{ url_for('add_event') }}">
                                    <span class="icon">
                                        <i class="fas fa-calendar-plus"></i>
                                    </span>
                                    <span>Add Event</span>
                                </a>
                            </p>
                        </div>
                    </div>
                {% elif events | length > 5 %}
                    <h2 class="subtitle">
                        <button class="button is-text">Filter</button>
                        {{ events.filter }}
                    </h2>
                {% endif %}
            </div>
        </div>
    </section>
    {% if events | length > 0 %}
        {% for event in events %}
            {% if loop.index == 1 or loop.index > 1 and event['start_date'] != events[loop.index-2]['start_date'] %}
                <nav class="level is-primary">
                    <!-- Left side -->
                    <div class="level-left">
                        <div class="level-item">
                            <p class="title"><i class="far fa-calendar-alt"></i> {{ event['start_date'].strftime('%Y-%m-%d') }}</p>
                        </div>
                    </div>
                </nav>
            {% endif %}
            {% include 'event/event.html' %}
        {% endfor %}

    {% endif %}

{% endblock %}